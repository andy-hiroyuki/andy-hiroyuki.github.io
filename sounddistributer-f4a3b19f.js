function addMusic(t){var a="";a+="<tr class='track' data-track_idx='"+t.track_idx+"'>",a+="<td class='right'>"+t.track_no+".</td>",a+="<td>"+t.title+"</td>",a+="<td>"+convertDuration(1e3*t.duration)+"</td>",a+="</tr>",$("#musiclist tbody").append(a)}function convertDuration(t){var a=String(Math.floor(t/36e5)+100).substring(1),r=String(Math.floor((t-36e5*a)/6e4)+100).substring(1),n=String(Math.round((t-36e5*a-6e4*r)/1e3)+100).substring(1),c=60*Number(a)+Number(r);return c+":"+n}soundManager.url="/swfs/",soundManager.flashVersion=9,soundManager.useFlashBlock=!1,soundManager.useHighPerformance=!0,soundManager.wmode="transparent",soundManager.useFastPolling=!0;var sc_tracks=new Array;$(function(){soundManager.onready(function(){$.getJSON(tracks_url,function(a){$.each(a,function(a,r){sc_tracks[a]={track_idx:a,track_no:a+1,track_id:"track_"+(a+1),title:r.title,duration:r.time,url:album_url+r.filename},soundManager.createSound({id:sc_tracks[a].track_id,url:sc_tracks[a].url,onplay:function(){$(".player").addClass("playing"),$(".title").text(sc_tracks[a].title)},onresume:function(){$(".player").addClass("playing")},onpause:function(){$(".player").removeClass("playing")},onfinish:function(){t()}})}),$(".title").text(sc_tracks[0].title);for(var r=0;r<sc_tracks.length;r++)addMusic(sc_tracks[r])})}),$(document).on("click touchstart","#musiclist tr.track",function(){var t=$(this),a=t.data("track_idx"),r=sc_tracks[a],n=t.is(".active");n?soundManager.pause(r.track_id):(t.siblings("tr").hasClass("active")&&soundManager.stopAll(),soundManager.play(r.track_id)),t.toggleClass("active").siblings("tr").removeClass("active")}),$(document).on("click",".play, .pause",function(){if(1==$("#musiclist tr.track").hasClass("active")){var t=$("#musiclist .active").data("track_idx");soundManager.togglePause(sc_tracks[t].track_id)}else $("#musiclist tbody tr:first-child").click()}),$(document).on("click",".next",function(){t()}),$(document).on("click",".prev",function(){a()});var t=function(){soundManager.stopAll(),0==$("tr.track.active").next().click().length&&$("#musiclist tr.track:first-child").click()},a=function(){soundManager.stopAll(),0==$("tr.track.active").prev().click().length&&$("#musiclist tr.track:last-child").click()}});