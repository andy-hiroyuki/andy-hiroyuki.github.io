function addMusic(t){var a="";a+="<tr class='track' data-track_idx='"+t.track_idx+"'>",a+="<td class='right'>"+t.track_no+".</td>",a+="<td>"+t.title+"</td>",a+="<td>"+t.album+"</td>",a+="<td>"+convertDuration(t.duration)+"</td>",a+="</tr>",$("#musiclist tbody").append(a)}function convertDuration(t){var a=String(Math.floor(t/36e5)+100).substring(1),r=String(Math.floor((t-36e5*a)/6e4)+100).substring(1),n=String(Math.round((t-36e5*a-6e4*r)/1e3)+100).substring(1),s=60*Number(a)+Number(r);return s+":"+n}soundManager.url="/swfs/",soundManager.flashVersion=9,soundManager.useFlashBlock=!1,soundManager.useHighPerformance=!0,soundManager.wmode="transparent",soundManager.useFastPolling=!0;var consumer_key="7765a8914aa491a0ae721b57e4f43415";"undefined"==typeof soundcloud_url&&(soundcloud_url="http://soundcloud.com/foofighters/sets/wasting-light");var sc_tracks=new Array;$(function(){soundManager.onready(function(){var t="http://api.soundcloud.com/resolve?url="+soundcloud_url+"&format=json&consumer_key="+consumer_key+"&callback=?";$.getJSON(t,function(t){var r=t.title;$.each(t.tracks,function(t,n){url=n.stream_url,url+=-1==url.indexOf("secret_token")?"?":"&",url=url+"consumer_key="+consumer_key,sc_tracks[t]={track_idx:t,track_no:t+1,track_id:"track_"+n.id,title:n.title,duration:n.duration,url:url,album:r},soundManager.createSound({id:sc_tracks[t].track_id,url:sc_tracks[t].url,onplay:function(){$(".player").addClass("playing"),$(".title").text(sc_tracks[t].title)},onresume:function(){$(".player").addClass("playing")},onpause:function(){$(".player").removeClass("playing")},onfinish:function(){a()}})}),$(".title").text(sc_tracks[0].title);for(var n=0;n<sc_tracks.length;n++)addMusic(sc_tracks[n])}),$(document).on("click","#musiclist tr.track",function(){var t=$(this),a=t.data("track_idx"),r=sc_tracks[a],n=t.is(".active");n?soundManager.pause(r.track_id):(t.siblings("tr").hasClass("active")&&soundManager.stopAll(),soundManager.play(r.track_id)),t.toggleClass("active").siblings("tr").removeClass("active")}),$(document).on("click",".play, .pause",function(){if(1==$("#musiclist tr.track").hasClass("active")){var t=$("#musiclist .active").data("track_idx");soundManager.togglePause(sc_tracks[t].track_id)}else $("#musiclist tbody tr:first-child").click()}),$(document).on("click",".next",function(){a()}),$(document).on("click",".prev",function(){r()});var a=function(){soundManager.stopAll(),0==$("tr.track.active").next().click().length&&$("#musiclist tr.track:first-child").click()},r=function(){soundManager.stopAll(),0==$("tr.track.active").prev().click().length&&$("#musiclist tr.track:last-child").click()}})});